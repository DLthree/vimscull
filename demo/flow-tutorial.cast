{"version": 2, "width": 110, "height": 38, "timestamp": 1771501914, "env": {"SHELL": "/bin/bash", "TERM": "xterm-256color"}}
[0.01674, "o", "\u001b[?1049h\u001b[22;0;0t\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b]11;?\u0007\u001b[?2004h\u001b[?u\u001b[c\u001b[?25h"]
[0.055269, "o", "\u001b[?25l\u001b(B\u001b[m\u001b[H\u001b[2J\u001b]112\u0007\u001b[2 q\u001b[?1002h\u001b[?1006h\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[J\u001b[H"]
[0.078131, "o", "\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[0;1m\u001b[38;2;255;255;0m1   \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"\"\"Request handling pipeline —\u001b[1;37H entry point for HTTP requests.\"\"\"\u001b(B\u001b[m\u001b[48;2;102;102;102m                                        \r\n\u001b(B\u001b[m\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  1 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  2 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  3 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mhandle_request\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  4 \u001b(B\u001b[m    \u001b[38;2;255;160;160m\"\"\"Main request handler. Validates input then dispatches.\"\"\"\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  5 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mif\u001b(B\u001b[m \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mnot\u001b(B\u001b[m validate_headers(request):\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  6 \u001b(B\u001b[m        \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m {\u001b[38;2;255;160;160m\"status\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m401\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m\"Unauthorized\"\u001b(B\u001b[m}\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  7 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  8 \u001b(B\u001b[m    user = extract_user(request)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  9 \u001b(B\u001b[m    payload = parse_body(request)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 10 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m dispatch(user, payload)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 11 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 12 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 13 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mvalidate_headers\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mbool\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 14 \u001b(B\u001b[m    token = request.get(\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m, {}).get(\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 15 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m token.startswith(\u001b[38;2;255;160;160m\"Bearer \"\u001b(B\u001b[m) \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mand\u001b(B\u001b[m \u001b[38;2;64;255;255mlen\u001b(B\u001b[m(token) > \u001b[38;2;255;160;160m7\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 16 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 17 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 18 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mextract_user\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mstr\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 19 \u001b(B\u001b[m    token = request[\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m7\u001b(B\u001b[m:]\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 20 \u001b(B\u001b[m    \u001b[38;2;128;160;255m# Decode JWT claims (simplified)\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 21 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m base64, json\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 22 \u001b(B\u001b[m    claims = json.loads(base64.b64decode(token.split(\u001b[38;2;255;160;160m\".\"\u001b(B\u001b[m)[\u001b[38;2;255;160;160m1\u001b(B\u001b[m] + \u001b[38;2;255;160;160m\"==\"\u001b(B\u001b[m))\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 23 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m claims[\u001b[38;2;255;160;160m\"sub\"\u001b(B\u001b[m]\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 24 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 25 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 26 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mparse_body\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:"]
[0.078292, "o", "\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 27 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 28 \u001b(B\u001b[m    raw = request.get(\u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"{}\"\u001b(B\u001b[m)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 29 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m json.loads(raw)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 30 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 31 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 32 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mdispatch\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, payload: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 33 \u001b(B\u001b[m    action = payload.get(\u001b[38;2;255;160;160m\"action\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 34 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mif\u001b(B\u001b[m action == \u001b[38;2;255;160;160m\"transfer\"\u001b(B\u001b[m:\u001b[K\r\n                                                                                                              \r\n\u001b[K\n\u001b[J\u001b]112\u0007\u001b[2 q\u001b[1;7H\u001b[?25h"]
[0.078518, "o", "\u001b[?25l\r\u001b[36B\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mFailed to source `/home/runner/.local/share/nvim/lazy/telescope.nvim/plugin/telescope.lua`\u001b[11;38r\u001b[11;1H\u001b(B\u001b[m\u001b[26M\u001b[r\u001b[10;1H\u001b(B\u001b[0;1;7m                                                                                                              \r\n\n\n\u001b(B\u001b[m\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mvim/_editor.lua:341: /home/runner/work/vimscull/vimscull/demo/init_realistic.lua..nvim_exec2() called at /home\r\n/runner/work/vimscull/vimscull/demo/init_realistic.lua:0../home/runner/.local/share/nvim/lazy/telescope.nvim/p\r\nlugin/telescope.lua: Vim(source):E5113: Error while calling lua chunk: ...ocal/share/nvim/lazy/telescope.nvim/\r\nplugin/telescope.lua:2: Telescope.nvim requires at least nvim-0.10.4.\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mstack traceback:\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I[C]: in function 'error'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I...ocal/share/nvim/lazy/telescope.nvim/plugin/telescope.lua:2: in main chunk\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I[C]: in function 'nvim_exec2'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^Ivim/_editor.lua:341: in function 'cmd'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I...local/share/nvim/lazy/lazy.nvim/lua/lazy/core/loader.lua:510: in function <...local/share/nvim/lazy/lazy.\r\nnvim/lua/lazy/core/loader.lua:509>\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I[C]: in function 'xpcall'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I.../.local/share/nvim/lazy/lazy.nvim/lua/lazy/core/util.lua:135: in function 'try'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I...local/share/nvim/lazy/lazy.nvim/lua/lazy/core/loader.lua:509: in function 'source'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I...local/share/nvim/lazy/lazy.nvim/lua/lazy/core/loader.lua:457: in function 'source_runtime'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I...local/share/nvim/lazy/lazy.nvim/lua/lazy/core/loader.lua:425: in function 'packadd'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I...local/share/nvim/lazy/lazy.nvim/lua/lazy/core/loader.lua:359: in function '_load'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I...local/share/nvim/lazy/lazy.nvim/lua/lazy/core/loader.lua:197: in function 'load'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I...local/share/nvim/lazy/lazy.nvim/lua/lazy/core/loader.lua:127: in function 'startup'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I...unner/.local/share/nvim/lazy/lazy.nvim/lua/lazy/init.lua:112: in function 'setup'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m^I/home/runner/work/vimscull/vimscull/demo/init_realistic.lua:51: in main chunk\u001b(B\u001b[m\u001b[K\r\n\u001b[K\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m# stacktrace:\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m  - vim/_editor.lua:341 _in_ **cmd**\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m  - demo/init_realistic.lua:51\u001b(B\u001b[m\u001b[K\r\n\u001b(B\u001b[0;1m\u001b[38;2;0;128;0mPress ENTER or type command to continue\u001b(B\u001b[m\u001b[K\u001b[?1002l\u001b[?1006l\u001b[?25h"]
[0.112672, "o", "\u001b[?25l\u001b[?1004h\u001b[?25h"]
[15.047264, "o", "\u001b[?25l\r\u001b[28A\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  9 \u001b(B\u001b[m    payload = parse_body(request)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 10 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m dispatch(user, payload)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 11 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 12 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 13 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mvalidate_headers\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mbool\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 14 \u001b(B\u001b[m    token = request.get(\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m, {}).get(\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 15 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m token.startswith(\u001b[38;2;255;160;160m\"Bearer \"\u001b(B\u001b[m) \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mand\u001b(B\u001b[m \u001b[38;2;64;255;255mlen\u001b(B\u001b[m(token) > \u001b[38;2;255;160;160m7\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 16 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 17 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 18 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mextract_user\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mstr\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 19 \u001b(B\u001b[m    token = request[\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m7\u001b(B\u001b[m:]\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 20 \u001b(B\u001b[m    \u001b[38;2;128;160;255m# Decode JWT claims (simplified)\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 21 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m base64, json\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 22 \u001b(B\u001b[m    claims = json.loads(base64.b64decode(token.split(\u001b[38;2;255;160;160m\".\"\u001b(B\u001b[m)[\u001b[38;2;255;160;160m1\u001b(B\u001b[m] + \u001b[38;2;255;160;160m\"==\"\u001b(B\u001b[m))\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 23 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m claims[\u001b[38;2;255;160;160m\"sub\"\u001b(B\u001b[m]\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 24 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 25 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 26 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mparse_body\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 27 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 28 \u001b(B\u001b[m    raw = request.get(\u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"{}\"\u001b(B\u001b[m)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 29 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m json.loads(raw)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 30 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 31 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 32 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mdispatch\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, payload: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 33 \u001b(B\u001b[m    action = payload.get(\u001b[38;2;255;160;160m\"action\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 34 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mif\u001b(B\u001b[m action == \u001b[38;2;255;160;160m\"transfer\"\u001b(B\u001b[m:\u001b[K\r\n\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m NORMAL \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m\u001b[36;10H \u001b[36;12H copilot/update-demos-in-readme \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0m example_flow.py                utf-8 \u001b[36;83H \u001b[36;85H \u001b[36;87H\u001b(B\u001b[m\u001b[38;2;25"]
[15.047416, "o", "5;188;3m\u001b[48;2;0;0;0m \u001b[36;89H \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0mpython \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m Top \u001b[36;103H\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m   1:1  \u001b(B\u001b[m\r\n\u001b[K\n\u001b[J\u001b[?1002h\u001b[?1006h\u001b[1;7H\u001b[?25h\u001b[?25l\u001b[38;100H^[\u001b[1;7H\u001b[?25h\u001b[?25l\u001b[38;100H  \u001b[1;7H\u001b[?25h"]
[15.530301, "o", "\u001b[?25l\u001b[38;100H:\u001b[1;7H\u001b[?25h"]
[15.530382, "o", "\u001b[?25l\u001b[38;100H \r\u001b[A:\u001b]112\u0007\u001b[2 q\u001b[?25h"]
[15.539307, "o", "\u001b[?25l\r\u001b[A\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;64;255;255m COMMAND \u001b(B\u001b[m\u001b[38;2;64;255;255m\u001b[48;2;0;0;0m\u001b[36;11H \u001b[36;13H copilot/update-demos-in-readme \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0m example_flow.py               utf-8 \u001b[36;83H \u001b[36;85H \u001b[36;87H\u001b(B\u001b[m\u001b[38;2;255;188;3m\u001b[48;2;0;0;0m \u001b[36;89H \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0mpython \u001b(B\u001b[m\u001b[38;2;64;255;255m\u001b[48;2;0;0;0m Top \u001b[36;103H\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;64;255;255m   1:1  \u001b[37;2H\u001b[?25h"]
[15.630467, "o", "\u001b[?25l\u001b(B\u001b[mN\u001b[?25h"]
[15.730734, "o", "\u001b[?25lu\u001b[?25h"]
[15.830921, "o", "\u001b[?25lm\u001b[?25h"]
[15.931199, "o", "\u001b[?25ls\u001b[?25h"]
[16.031235, "o", "\u001b[?25lc\u001b[?25h"]
[16.131657, "o", "\u001b[?25lu\u001b[?25h"]
[16.231714, "o", "\u001b[?25ll\u001b[?25h"]
[16.332019, "o", "\u001b[?25ll\u001b[?25h"]
[16.432287, "o", "\u001b[?25lC\u001b[?25h"]
[16.532488, "o", "\u001b[?25lo\u001b[?25h"]
[16.63274, "o", "\u001b[?25ln\u001b[?25h"]
[16.732848, "o", "\u001b[?25ln\u001b[?25h"]
[16.833066, "o", "\u001b[?25le\u001b[?25h"]
[16.933368, "o", "\u001b[?25lc\u001b[?25h"]
[17.033479, "o", "\u001b[?25lt\u001b[?25h"]
[17.133726, "o", "\u001b[?25l\u001b[C\u001b[?25h"]
[17.233922, "o", "\u001b[?25l1\u001b[?25h"]
[17.33414, "o", "\u001b[?25l2\u001b[?25h"]
[17.434402, "o", "\u001b[?25l7\u001b[?25h"]
[17.53467, "o", "\u001b[?25l.\u001b[?25h"]
[17.634829, "o", "\u001b[?25l0\u001b[?25h"]
[17.735094, "o", "\u001b[?25l.\u001b[?25h"]
[17.83536, "o", "\u001b[?25l0\u001b[?25h"]
[17.935633, "o", "\u001b[?25l.\u001b[?25h"]
[18.035817, "o", "\u001b[?25l1\u001b[?25h"]
[18.136124, "o", "\u001b[?25l\u001b[C\u001b[?25h"]
[18.236306, "o", "\u001b[?25l5\u001b[?25h"]
[18.336448, "o", "\u001b[?25l2\u001b[?25h"]
[18.436793, "o", "\u001b[?25l2\u001b[?25h"]
[18.536913, "o", "\u001b[?25l3\u001b[?25h"]
[18.637212, "o", "\u001b[?25l\r\u001b[37;1H\u001b[?25h"]
[18.638985, "o", "\u001b[?25l\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m[numscull] /home/runner/work/vimscull/vimscull/lua/numscull/client.lua:48: attempt to call field 'load_keypair\r\n' (a nil value)\u001b]112\u0007\u001b[2 q\u001b[1;7H\u001b[?25h"]
[18.647572, "o", "\u001b[?25l\r\u001b[35B\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m NORMAL \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m\u001b[36;10H \u001b[36;12H copilot/update-demos-in-readme \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0m example_flow.py                utf-8 \u001b[36;83H \u001b[36;85H \u001b[36;87H\u001b(B\u001b[m\u001b[38;2;255;188;3m\u001b[48;2;0;0;0m \u001b[36;89H \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0mpython \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m Top \u001b[36;103H\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m   1:1  \u001b[1;7H\u001b[?25h"]
[21.737632, "o", "\u001b[?25l\u001b[38;100H\u001b(B\u001b[m:\u001b[1;7H\u001b[?25h"]
[21.73782, "o", "\u001b[?25l\r\u001b[36B\u001b[K\n\u001b[100X\u001b[A:\u001b]112\u0007\u001b[2 q\u001b[?25h"]
[21.741239, "o", "\u001b[?25l\r\u001b[A\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;64;255;255m COMMAND \u001b(B\u001b[m\u001b[38;2;64;255;255m\u001b[48;2;0;0;0m\u001b[36;11H \u001b[36;13H copilot/update-demos-in-readme \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0m example_flow.py               utf-8 \u001b[36;83H \u001b[36;85H \u001b[36;87H\u001b(B\u001b[m\u001b[38;2;255;188;3m\u001b[48;2;0;0;0m \u001b[36;89H \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0mpython \u001b(B\u001b[m\u001b[38;2;64;255;255m\u001b[48;2;0;0;0m Top \u001b[36;103H\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;64;255;255m   1:1  \u001b[37;2H\u001b[?25h"]
[21.837857, "o", "\u001b[?25l\u001b(B\u001b[mN\u001b[?25h"]
[21.938101, "o", "\u001b[?25lu\u001b[?25h"]
[22.038273, "o", "\u001b[?25lm\u001b[?25h"]
[22.138569, "o", "\u001b[?25ls\u001b[?25h"]
[22.238778, "o", "\u001b[?25lc\u001b[?25h"]
[22.339015, "o", "\u001b[?25lu\u001b[?25h"]
[22.43911, "o", "\u001b[?25ll\u001b[?25h"]
[22.539263, "o", "\u001b[?25ll\u001b[?25h"]
[22.63967, "o", "\u001b[?25lP\u001b[?25h"]
[22.739722, "o", "\u001b[?25lr\u001b[?25h"]
[22.840065, "o", "\u001b[?25lo\u001b[?25h"]
[22.94022, "o", "\u001b[?25lj\u001b[?25h"]
[23.040267, "o", "\u001b[?25le\u001b[?25h"]
[23.140666, "o", "\u001b[?25lc\u001b[?25h"]
[23.240904, "o", "\u001b[?25lt\u001b[?25h"]
[23.341019, "o", "\u001b[?25l\u001b[C\u001b[?25h"]
[23.441255, "o", "\u001b[?25ld\u001b[?25h"]
[23.541484, "o", "\u001b[?25le\u001b[?25h"]
[23.641694, "o", "\u001b[?25lm\u001b[?25h"]
[23.742018, "o", "\u001b[?25lo\u001b[?25h"]
[23.842168, "o", "\u001b[?25l-\u001b[?25h"]
[23.942363, "o", "\u001b[?25la\u001b[?25h"]
[24.042575, "o", "\u001b[?25lu\u001b[?25h"]
[24.142807, "o", "\u001b[?25ld\u001b[?25h"]
[24.242989, "o", "\u001b[?25li\u001b[?25h"]
[24.343223, "o", "\u001b[?25lt\u001b[?25h"]
[24.44352, "o", "\u001b[?25l\r\u001b[37;1H\u001b[?25h"]
[24.443993, "o", "\u001b[?25l\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mError executing Lua callback: ...runner/work/vimscull/vimscull/lua/numscull/transport.lua:177: run_sync: ...ru\r\nnner/work/vimscull/vimscull/lua/numscull/transport.lua:68: read failed: EOF (wanted 10 bytes, buffer had 0). \u001b[36;38r\u001b[36;1H\u001b(B\u001b[m\u001b[M\u001b[r\u001b[35;1H\u001b(B\u001b[0;1;7m                                                                                                              \u001b(B\u001b[m\r\n\n\n\u001b[J\u001b[37;110H\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mS\u001b[28;38r\u001b[28;1H\u001b(B\u001b[m\u001b[7M\u001b[r\u001b[31;1H\u001b[38;2;255;255;255m\u001b[48;2;255;0;0merver closed connection; if no active project, use :NumscullProject <name>.\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mstack traceback:\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        [C]: in function 'error'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        ...runner/work/vimscull/vimscull/lua/numscull/transport.lua:177: in function 'run_sync'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        /home/runner/work/vimscull/vimscull/lua/numscull/client.lua:130: in function 'change_project'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        /home/runner/work/vimscull/vimscull/plugin/numscull.lua:59: in function </home/runner/work/vimscull/vi\r\nmscull/plugin/numscull.lua:57>\u001b(B\u001b[m\u001b[K\r\n\u001b(B\u001b[0;1m\u001b[38;2;0;128;0mPress ENTER or type command to continue\u001b(B\u001b[m\u001b[K\u001b]112\u0007\u001b[2 q\u001b[?1002l\u001b[?1006l\u001b[?25h"]
[140.673024, "o", "\u001b[?25l\r\u001b[10A\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 27 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json                                                                                         \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 28 \u001b(B\u001b[m    raw = request.get(\u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"{}\"\u001b(B\u001b[m)                                                                     \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 29 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m json.loads(raw)                                                                              \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 30 \u001b(B\u001b[m                                                                                                        \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 31 \u001b(B\u001b[m                                                                                                        \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 32 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mdispatch\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, payload: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:                                                         \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 33 \u001b(B\u001b[m    action = payload.get(\u001b[38;2;255;160;160m\"action\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)                                                                  \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 34 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mif\u001b(B\u001b[m action == \u001b[38;2;255;160;160m\"transfer\"\u001b(B\u001b[m:                                                                            \r\n\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;64;255;255m COMMAND \u001b(B\u001b[m\u001b[38;2;64;255;255m\u001b[48;2;0;0;0m\u001b[36;11H \u001b[36;13H copilot/update-demos-in-readme \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0m example_flow.py               utf-8 \u001b[36;83H \u001b[36;85H \u001b[36;87H\u001b(B\u001b[m\u001b[38;2;255;188;3m\u001b[48;2;0;0;0m \u001b[36;89H \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0mpython \u001b(B\u001b[m\u001b[38;2;64;255;255m\u001b[48;2;0;0;0m Top \u001b[36;103H\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;64;255;255m   1:1  \u001b(B\u001b[m\r\n\u001b[K\n\u001b[J\u001b[?1002h\u001b[?1006h\u001b[1;7H\u001b[?25h\u001b[?25l\u001b[38;100H^[\u001b[1;7H\u001b[?25h\u001b[?25l\u001b[38;100H  \u001b[1;7H\u001b[?25h"]
[140.67313, "o", "\u001b[?25l\r\u001b[35B\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m NORMAL \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m\u001b[36;10H \u001b[36;12H copilot/update-demos-in-readme \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0m example_flow.py                utf-8 \u001b[36;83H \u001b[36;85H \u001b[36;87H\u001b(B\u001b[m\u001b[38;2;255;188;3m\u001b[48;2;0;0;0m \u001b[36;89H \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0mpython \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m Top \u001b[36;103H\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m   1:1  \u001b[1;7H\u001b[?25h"]
[140.67373, "o", "\u001b[?25l\r\u001b[36B\u001b(B\u001b[m:FlowCreate\u001b[CSecurity\u001b[CAudit\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.674418, "o", "\u001b[?25l\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mError executing Lua callback: ...runner/work/vimscull/vimscull/lua/numscull/transport.lua:174: run_sync: timeo\r\nut after 8000ms\u001b(B\u001b[m\r\u001b[A\u001b[K\n\u001b[J\u001b[A:6\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.675409, "o", "\u001b[?25l\u001b[1;3H\u001b[38;2;255;255;0m  5 \u001b(B\u001b[m\u001b[38;2;255;160;160m\"\"\"Request handling pipeline —\u001b[1;37H entry point for HTTP requests.\"\"\"\u001b(B\u001b[m\u001b[K\u001b[2;5H\u001b[38;2;255;255;0m4\u001b[3;5H3\u001b[4;5H2\u001b[5;5H1\u001b[6;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m6   \u001b(B\u001b[m\u001b[48;2;102;102;102m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96m\u001b[48;2;102;102;102mif\u001b(B\u001b[m\u001b[48;2;102;102;102m \u001b(B\u001b[0;1m\u001b[38;2;255;255;96m\u001b[48;2;102;102;102mnot\u001b(B\u001b[m\u001b[48;2;102;102;102m validate_headers(request):                                                                   \u001b[7;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m1\u001b[8;5H2\u001b[9;5H3\u001b[10;5H4\u001b[11;4H 5\u001b[12;4H 6\u001b[13;4H 7\u001b[14;4H 8\u001b[15;4H 9\u001b[16;5H0\u001b[17;5H1\u001b[18;5H2\u001b[19;5H3\u001b[20;5H4\u001b[21;4H15\u001b[22;4H16\u001b[23;4H17\u001b[24;4H18\u001b[25;4H19\u001b[26;5H0\u001b[27;5H1\u001b[28;5H2\u001b[29;5H3\u001b[30;5H4\u001b[31;4H25\u001b[32;4H26\u001b[33;4H27\u001b[34;4H28\u001b[35;4H29\u001b[6;7H\u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mif\u001b(B\u001b[m \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mnot\u001b(B\u001b[m validate_headers(request):\u001b[K\r\u001b[32B\u001b(B\u001b[0;1m-- VISUAL --\u001b[6;18H\u001b(B\u001b[m\u001b[48;2;169;169;169mvalidate_header\u001b[26D\u001b(B\u001b[m\u001b[48;2;102;102;102m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96m\u001b[48;2;102;102;102mif\u001b(B\u001b[m\u001b[48;2;102;102;102m \u001b(B\u001b[0;1m\u001b[38;2;255;255;96m\u001b[48;2;102;102;102mnot\u001b(B\u001b[m\u001b[48;2;102;102;102m validate_headers(request):                                                                   \u001b(B\u001b[m\r\u001b[31B  \r\n\u001b[12X\u001b[A:FlowAddNode\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.676051, "o", "\u001b[?25l\u001b[12X\u001b[38;2;255;0;0m[numscull] no active flow —\u001b[37;28H create one first\u001b[1;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m6\u001b[2;5H5\u001b[3;5H4\u001b[4;5H3\u001b[5;5H2\u001b[6;3H  1 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mif\u001b(B\u001b[m \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mnot\u001b(B\u001b[m validate_headers(request):\u001b[K\u001b[7;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m7   \u001b(B\u001b[m\u001b[48;2;102;102;102m        \u001b(B\u001b[0;1m\u001b[38;2;255;255;96m\u001b[48;2;102;102;102mreturn\u001b(B\u001b[m\u001b[48;2;102;102;102m {\u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"status\"\u001b(B\u001b[m\u001b[48;2;102;102;102m: \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m401\u001b(B\u001b[m\u001b[48;2;102;102;102m, \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"body\"\u001b(B\u001b[m\u001b[48;2;102;102;102m: \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"Unauthorized\"\u001b(B\u001b[m\u001b[48;2;102;102;102m}                                                  \u001b[8;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m1\u001b[9;5H2\u001b[10;5H3\u001b[11;5H4\u001b[12;5H5\u001b[13;5H6\u001b[14;5H7\u001b[15;5H8\u001b[16;4H 9\u001b[17;5H0\u001b[18;5H1\u001b[19;5H2\u001b[20;5H3\u001b[21;5H4\u001b[22;5H5\u001b[23;5H6\u001b[24;5H7\u001b[25;5H8\u001b[26;4H19\u001b[27;5H0\u001b[28;5H1\u001b[29;5H2\u001b[30;5H3\u001b[31;5H4\u001b[32;5H5\u001b[33;5H6\u001b[34;5H7\u001b[35;5H8\r\n\n\n\u001b(B\u001b[0;1m-- INSERT --\u001b]112\u0007\u001b[6 q\u001b[?25h"]
[148.680654, "o", "\u001b[?25l\u001b(B\u001b[m\r\u001b[38;1H\u001b[12X\u001b[A\u001b[44X\u001b[1;5H\u001b[38;2;255;255;0m8\u001b[2;5H7\u001b[3;5H6\u001b[4;5H5\u001b[5;5H4\u001b[6;5H3\u001b[7;3H  2 \u001b(B\u001b[m        ruth guard check\u001b[K\u001b[8;15H:\u001b[38;2;255;160;160m9\u001b[9;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m9   \u001b(B\u001b[m\u001b[48;2;102;102;102m        011lv11leturn {\u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"status\"\u001b(B\u001b[m\u001b[48;2;102;102;102m: \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m401\u001b(B\u001b[m\u001b[48;2;102;102;102m, \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"body\"\u001b(B\u001b[m\u001b[48;2;102;102;102m: \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"Unauthorized\"\u001b(B\u001b[m\u001b[48;2;102;102;102m}                                           \u001b[10;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m1 \u001b(B\u001b[m\u001b[33X\u001b[11;5H\u001b[38;2;255;255;0m2 \u001b(B\u001b[m    user = extract_user(request)  \u001b[12;5H\u001b[38;2;255;255;0m3 \u001b(B\u001b[m    payload = parse_body(request)\u001b[13;5H\u001b[38;2;255;255;0m4 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m dispatch(user, payload)\u001b[14;5H\u001b[38;2;255;255;0m5 \u001b(B\u001b[m\u001b[44X\u001b[15;5H\u001b[38;2;255;255;0m6 \u001b(B\u001b[m\u001b[63X\u001b[16;5H\u001b[38;2;255;255;0m7 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mvalidate_headers\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mbool\u001b(B\u001b[m:\u001b[13X\u001b[17;4H\u001b[38;2;255;255;0m 8 \u001b(B\u001b[m    token = request.get(\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m, {}).get(\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[18;4H\u001b[38;2;255;255;0m 9 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m token.startswith(\u001b[38;2;255;160;160m\"Bearer \"\u001b(B\u001b[m) \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mand\u001b(B\u001b[m \u001b[38;2;64;255;255mlen\u001b(B\u001b[m(token) > \u001b[38;2;255;160;160m7\u001b[19;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m0 \u001b(B\u001b[m\u001b[39X\u001b[20;5H\u001b[38;2;255;255;0m1 \u001b(B\u001b[m\u001b[51X\u001b[21;5H\u001b[38;2;255;255;0m2 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mextract_user\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mstr\u001b(B\u001b[m:\u001b[22;5H\u001b[38;2;255;255;0m3 \u001b(B\u001b[m    token = request[\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m7\u001b(B\u001b[m:]\u001b[23;5H\u001b[38;2;255;255;0m4 \u001b(B\u001b[m    \u001b[38;2;128;160;255m# Decode JWT claims (simplified)\u001b(B\u001b[m\u001b[33X\u001b[24;5H\u001b[38;2;255;255;0m5 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m base64, json \u001b[25;5H\u001b[38;2;255;255;0m6 \u001b(B\u001b[m    claims = json.loads(base64.b64decode(token.split(\u001b[38;2;255;160;160m\".\"\u001b(B\u001b[m)[\u001b[38;2;255;160;160m1\u001b(B\u001b[m] + \u001b[38;2;255;160;160m\"==\"\u001b(B\u001b[m))\u001b[26;5H\u001b[38;2;255;255;0m7 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m claims[\u001b[38;2;255;160;160m\"sub\"\u001b(B\u001b[m]\u001b[27;4H\u001b[38;2;255;255;0m18 \u001b(B\u001b[m\u001b[38X\u001b[28;4H\u001b[38;2;255;255;0m19 \u001b(B\u001b[m\u001b[15X\u001b[29;5H\u001b[38;2;255;255;0m0 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mparse_body\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[30;5H\u001b[38;2;255;255;0m1 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json\u001b[11X\u001b[31;5H\u001b[38;2;255;255;0m2 \u001b(B\u001b[m    raw = request.get(\u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"{}\"\u001b(B\u001b[m)\u001b[32;5H\u001b[38;2;255;255;0m3 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m json.loads(raw)\u001b[33;5H\u001b[38;2;255;255;0m4 \u001b(B\u001b[m\u001b[47X\u001b[34;5H\u001b[38;2;255;255;0m5 \u001b(B\u001b[m\u001b[38X\u001b[35;5H\u001b[38;2;255;255;0m6 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mdispatch\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, payload: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\r\n\n:FlowAddNode\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.689271, "o", "\u001b[?25l\u001b[12X\u001b[38;2;255;0;0m[numscull] no active flow —\u001b[37;28H create one first\u001b[1;4H\u001b(B\u001b[m\u001b[38;2;255;255;0m10\u001b[2;5H9\u001b[3;5H8\u001b[4;5H7\u001b[5;5H6\u001b[6;5H5\u001b[7;5H4\u001b[8;5H3\u001b[9;3H  2 \u001b(B\u001b[m        011lv11leturn {\u001b[38;2;255;160;160m\"status\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m401\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m\"Unauthorized\"\u001b(B\u001b[m}\u001b[K\u001b[11;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m11  \u001b(B\u001b[m\u001b[48;2;102;102;102m    user = extract_user(request)                                                                        \u001b[12;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m1\u001b[13;5H2\u001b[14;5H3\u001b[15;5H4\u001b[16;5H5\u001b[17;5H6\u001b[18;5H7\u001b[19;4H 8\u001b[20;4H 9\u001b[21;5H0\u001b[22;5H1\u001b[23;5H2\u001b[24;5H3\u001b[25;5H4\u001b[26;5H5\u001b[27;5H6\u001b[28;5H7\u001b[29;4H18\u001b[30;4H19\u001b[31;5H0\u001b[32;5H1\u001b[33;5H2\u001b[34;5H3\u001b[35;5H4\u001b[11;40H\u001b(B\u001b[m\u001b[48;2;102;102;102mpayload = parse_body(request)\u001b[12;11H\u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m dispatch(user, payload)\u001b[13;11H\u001b[30X\u001b[15;7H\u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mvalidate_headers\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mbool\u001b(B\u001b[m:\u001b[16;7H    token = request.get(\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m, {}).get(\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[17;11H\u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m token.startswith(\u001b[38;2;255;160;160m\"Bearer \"\u001b(B\u001b[m) \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mand\u001b(B\u001b[m \u001b[38;2;64;255;255mlen\u001b(B\u001b[m(token) > \u001b[38;2;255;160;160m7\u001b(B\u001b[m\u001b[6X\u001b[18;11H\u001b[53X\u001b[20;7H\u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mextract_user\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mstr\u001b(B\u001b[m:\u001b[21;7H    token = request[\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m7\u001b(B\u001b[m:]\u001b[22;11H\u001b[38;2;128;160;255m# Decode JWT claims (simplified)\u001b(B\u001b[m\u001b[15X\u001b[23;11H\u001b[38;2;255;128;255mimport\u001b(B\u001b[m base64, json\u001b[13X\u001b[24;11Hclaims = json.loads(base64.b64decode(token.split(\u001b[38;2;255;160;160m\".\"\u001b(B\u001b[m)[\u001b[38;2;255;160;160m1\u001b(B\u001b[m] + \u001b[38;2;255;160;160m\"==\"\u001b(B\u001b[m))\u001b[25;11H\u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m claims[\u001b[38;2;255;160;160m\"sub\"\u001b(B\u001b[m]\u001b[45X\u001b[26;11H\u001b[20X\u001b[28;7H\u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mparse_body\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[29;7H    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json\u001b[23X\u001b[30;11Hraw = request.get(\u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"{}\"\u001b(B\u001b[m)\u001b[31;11H\u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m json.loads(raw)\u001b[9X\u001b[32;11H\u001b[22X\u001b[34;7H\u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mdispatch\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, payload: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[35;7H    action = payload.get(\u001b[38;2;255;160;160m\"action\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[9X\u001b[11;46H\u001b[48;2;102;102;102m = parse_body(request) \r\u001b[27B\u001b(B\u001b[0;1m-- INSERT --\u001b(B\u001b[m\r\u001b[38;1H\u001b[12X\u001b[A\u001b[44X\u001b[1;5H\u001b[38;2;255;255;0m2\u001b[2;4H11\u001b[3;4H10\u001b[4;5H9\u001b[5;5H8\u001b[6;5H7\u001b[7;5H6\u001b[8;5H5\u001b[9;5H4\u001b[10;5H3\u001b[11;3H  2 \u001b(B\u001b[m    user = extract_user(request) payloa = paction\u001b[K\u001b[12;11H:\u001b[38;2;255;160;160m11\u001b(B\u001b[m\u001b[27X\u001b[13;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m13  \u001b(B\u001b[m\u001b[48;2;102;102;102m    011lv7lrse_body(request)                                                                            \u001b[14;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m1 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m dispatch(user, payload)\u001b[15;5H\u001b[38;2;255;255;0m2 \u001b(B\u001b[m\u001b[44X\u001b[16;5H\u001b[38;2;255;255;0m3 \u001b(B\u001b[m\u001b[63X\u001b[17;5H\u001b[38;2;255;255;0m4 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mvalidate_headers\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mbool\u001b(B\u001b[m:\u001b[13X\u001b[18;5H\u001b[38;2;255;255;0m5 \u001b(B\u001b[m    token = request.get(\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m, {}).get(\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[19;5H\u001b[38;2;255;255;0m6 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m token.startswith(\u001b[38;2;255;160;160m\"Bearer \"\u001b(B\u001b[m) \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mand\u001b(B\u001b[m \u001b[38;2;64;255;255mlen\u001b(B\u001b[m(token) > \u001b[38;2;255;160;160m7\u001b[20;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m7 \u001b(B\u001b[m\u001b[39X\u001b[21;4H\u001b[38;2;255;255;0m 8 \u001b(B\u001b[m\u001b[51X\u001b[22;4H\u001b[38;2;255;255;0m 9 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mextr"]
[148.689343, "o", "act_user\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mstr\u001b(B\u001b[m:\u001b[23;5H\u001b[38;2;255;255;0m0 \u001b(B\u001b[m    token = request[\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m7\u001b(B\u001b[m:]\u001b[24;5H\u001b[38;2;255;255;0m1 \u001b(B\u001b[m    \u001b[38;2;128;160;255m# Decode JWT claims (simplified)\u001b(B\u001b[m\u001b[33X\u001b[25;5H\u001b[38;2;255;255;0m2 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m base64, json \u001b[26;5H\u001b[38;2;255;255;0m3 \u001b(B\u001b[m    claims = json.loads(base64.b64decode(token.split(\u001b[38;2;255;160;160m\".\"\u001b(B\u001b[m)[\u001b[38;2;255;160;160m1\u001b(B\u001b[m] + \u001b[38;2;255;160;160m\"==\"\u001b(B\u001b[m))\u001b[27;5H\u001b[38;2;255;255;0m4 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m claims[\u001b[38;2;255;160;160m\"sub\"\u001b(B\u001b[m]\u001b[28;5H\u001b[38;2;255;255;0m5 \u001b(B\u001b[m\u001b[38X\u001b[29;5H\u001b[38;2;255;255;0m6 \u001b(B\u001b[m\u001b[15X\u001b[30;5H\u001b[38;2;255;255;0m7 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mparse_body\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[31;4H\u001b[38;2;255;255;0m18 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json\u001b[11X\u001b[32;4H\u001b[38;2;255;255;0m19 \u001b(B\u001b[m    raw = request.get(\u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"{}\"\u001b(B\u001b[m)\u001b[33;5H\u001b[38;2;255;255;0m0 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m json.loads(raw)\u001b[34;5H\u001b[38;2;255;255;0m1 \u001b(B\u001b[m\u001b[47X\u001b[35;5H\u001b[38;2;255;255;0m2 \u001b(B\u001b[m\u001b[38X\r\n\n:Flo\u001b]112\u0007\u001b[2 q\u001b[?25h\u001b[?25lwAddNode\r\u001b[37;1H\u001b[?25h"]
[148.695764, "o", "\u001b[?25l\u001b[12X\u001b[38;2;255;0;0m[numscull] no active flow —\u001b[37;28H create one first\u001b[1;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m5\u001b[2;5H4\u001b[3;5H3\u001b[4;4H12\u001b[5;4H11\u001b[6;4H10\u001b[7;5H9\u001b[8;5H8\u001b[9;5H7\u001b[10;5H6\u001b[11;5H5\u001b[12;5H4\u001b[13;3H  3 \u001b(B\u001b[m    011lv7lrse_body(request)\u001b[K\u001b[14;5H\u001b[38;2;255;255;0m2\u001b[15;5H1\u001b[16;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m16  \u001b(B\u001b[m\u001b[48;2;102;102;102m                                                                                                        \u001b[17;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m1\u001b[18;5H2\u001b[19;5H3\u001b[20;5H4\u001b[21;5H5\u001b[22;5H6\u001b[23;4H 7\u001b[24;4H 8\u001b[25;4H 9\u001b[26;5H0\u001b[27;5H1\u001b[28;5H2\u001b[29;5H3\u001b[30;5H4\u001b[31;5H5\u001b[32;5H6\u001b[33;4H17\u001b[34;4H18\u001b[35;4H19\r\n\n\u001b(B\u001b[m2 fewer lines; before #4  0 seconds ago\u001b[5X\u001b[1;5H\u001b[38;2;255;255;0m0\u001b[2;4H 9\u001b[3;4H 8\u001b[4;4H 7\u001b[5;4H 6\u001b[6;4H 5\u001b[7;5H4\u001b[8;5H3\u001b[9;5H2\u001b[10;5H1\u001b[11;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m11  \u001b(B\u001b[m\u001b[48;2;102;102;102m    user = extract_user(request) payloa = parse_body(request)                                           \u001b[12;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m1 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m dispatch(user, payload)\u001b[13;5H\u001b[38;2;255;255;0m2 \u001b(B\u001b[m\u001b[28X\u001b[14;5H\u001b[38;2;255;255;0m3 \u001b(B\u001b[m\u001b[34X\u001b[15;5H\u001b[38;2;255;255;0m4 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mvalidate_headers\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mbool\u001b(B\u001b[m:\u001b[16;3H\u001b[38;2;255;255;0m  5 \u001b(B\u001b[m    token = request.get(\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m, {}).get(\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[K\u001b[17;5H\u001b[38;2;255;255;0m6 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m token.startswith(\u001b[38;2;255;160;160m\"Bearer \"\u001b(B\u001b[m) \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mand\u001b(B\u001b[m \u001b[38;2;64;255;255mlen\u001b(B\u001b[m(token) > \u001b[38;2;255;160;160m7\u001b[18;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m7 \u001b(B\u001b[m\u001b[63X\u001b[19;5H\u001b[38;2;255;255;0m8 \u001b(B\u001b[m\u001b[57X\u001b[20;5H\u001b[38;2;255;255;0m9 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mextract_user\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mstr\u001b(B\u001b[m:\u001b[21;4H\u001b[38;2;255;255;0m10 \u001b(B\u001b[m    token = request[\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m7\u001b(B\u001b[m:]\u001b[22;4H\u001b[38;2;255;255;0m11 \u001b(B\u001b[m    \u001b[38;2;128;160;255m# Decode JWT claims (simplified)\u001b(B\u001b[m   \u001b[23;4H\u001b[38;2;255;255;0m12 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m base64, json\u001b[28X\u001b[24;4H\u001b[38;2;255;255;0m13 \u001b(B\u001b[m    claims = json.loads(base64.b64decode(token.split(\u001b[38;2;255;160;160m\".\"\u001b(B\u001b[m)[\u001b[38;2;255;160;160m1\u001b(B\u001b[m] + \u001b[38;2;255;160;160m\"==\"\u001b(B\u001b[m))\u001b[25;4H\u001b[38;2;255;255;0m14 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m claims[\u001b[38;2;255;160;160m\"sub\"\u001b(B\u001b[m]\u001b[26;5H\u001b[38;2;255;255;0m5 \u001b(B\u001b[m\u001b[69X\u001b[27;5H\u001b[38;2;255;255;0m6 \u001b(B\u001b[m\u001b[24X\u001b[28;5H\u001b[38;2;255;255;0m7 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mparse_body\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[29;5H\u001b[38;2;255;255;0m8 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json\u001b[30;5H\u001b[38;2;255;255;0m9 \u001b(B\u001b[m    raw = request.get(\u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"{}\"\u001b(B\u001b[m)   \u001b[31;4H\u001b[38;2;255;255;0m20 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m json.loads(raw)\u001b[32;4H\u001b[38;2;255;255;0m21 \u001b(B\u001b[m\u001b[35X\u001b[33;4H\u001b[38;2;255;255;0m22 \u001b(B\u001b[m\u001b[26X\u001b[34;4H\u001b[38;2;255;255;0m23 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mdispatch\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, payload: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[35;4H\u001b[38;2;255;255;0m24 \u001b(B\u001b[m    action = payload.get(\u001b[38;2;255;160;160m\"action\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\r\n\n\n\u001b(B\u001b[0;1m-- INSERT --\u001b(B\u001b[m\r\u001b[38;1H\u001b[12X\u001b[A\u001b[39X\u001b[1;5H\u001b[38;2;255;255;0m1\u001b[2;4H10\u001b[3;5H9\u001b[4;5H8\u001b[5;5H7\u001b[6;5H6\u001b[7;5H5\u001b[8;5H4\u001b[9;5H3\u001b[10;5H2\u001b[11;3H  1 \u001b(B\u001b[m    user = extract_user(request) payloa = parse_bndler\u001b[K\u001b[12;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m12  \u001b(B\u001b[m\u001b[48;2;102;102;102m    ody(request)                                                                                        \u001b[13;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m1 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m dispatch(user, payload)\u001b[14;5H\u001b[38;2;255;255;0m2\u001b[15;5H3 \u001b(B\u001b[m\u001b[44X\u001b[16;5H\u001b[38;2;255;255;0m4 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2"]
[148.695922, "o", ";64;255;255mvalidate_headers\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mbool\u001b(B\u001b[m:\u001b[19X\u001b[17;5H\u001b[38;2;255;255;0m5 \u001b(B\u001b[m    token = request.get(\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m, {}).get(\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[18;5H\u001b[38;2;255;255;0m6 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m token.startswith(\u001b[38;2;255;160;160m\"Bearer \"\u001b(B\u001b[m) \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mand\u001b(B\u001b[m \u001b[38;2;64;255;255mlen\u001b(B\u001b[m(token) > \u001b[38;2;255;160;160m7\u001b[19;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m7\u001b[20;5H8 \u001b(B\u001b[m\u001b[39X\u001b[21;4H\u001b[38;2;255;255;0m 9 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mextract_user\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mstr\u001b(B\u001b[m:\u001b[12X\u001b[22;5H\u001b[38;2;255;255;0m0 \u001b(B\u001b[m    token = request[\u001b[38;2;255;160;160m\"headers\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m\"Authorization\"\u001b(B\u001b[m][\u001b[38;2;255;160;160m7\u001b(B\u001b[m:]\u001b[23;5H\u001b[38;2;255;255;0m1 \u001b(B\u001b[m    \u001b[38;2;128;160;255m# Decode JWT claims (simplified)\u001b[24;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m2 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m base64, json\u001b[46X\u001b[25;5H\u001b[38;2;255;255;0m3 \u001b(B\u001b[m    claims = json.loads(base64.b64decode(token.split(\u001b[38;2;255;160;160m\".\"\u001b(B\u001b[m)[\u001b[38;2;255;160;160m1\u001b(B\u001b[m] + \u001b[38;2;255;160;160m\"==\"\u001b(B\u001b[m))\u001b[26;5H\u001b[38;2;255;255;0m4 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m claims[\u001b[38;2;255;160;160m\"sub\"\u001b(B\u001b[m]\u001b[27;5H\u001b[38;2;255;255;0m5\u001b[28;5H6 \u001b(B\u001b[m\u001b[38X\u001b[29;5H\u001b[38;2;255;255;0m7 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mparse_body\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[30;5H\u001b[38;2;255;255;0m8 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json\u001b[20X\u001b[31;4H\u001b[38;2;255;255;0m19 \u001b(B\u001b[m    raw = request.get(\u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"{}\"\u001b(B\u001b[m)\u001b[32;5H\u001b[38;2;255;255;0m0 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m json.loads(raw)\u001b[33;5H\u001b[38;2;255;255;0m1\u001b[34;5H2 \u001b(B\u001b[m\u001b[47X\u001b[35;5H\u001b[38;2;255;255;0m3 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mdispatch\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, payload: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[1;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m1   \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"\"\"Request handling pipeline —\u001b[1;37H entry point for HTTP requests.\"\"\"\u001b(B\u001b[m\u001b[48;2;102;102;102m                                        \u001b[2;4H\u001b(B\u001b[m\u001b[38;2;255;255;0m 1\u001b[3;5H2\u001b[4;5H3\u001b[5;5H4\u001b[6;5H5\u001b[7;5H6\u001b[8;5H7\u001b[9;5H8\u001b[10;5H9\u001b[11;4H10\u001b[12;3H 11 \u001b(B\u001b[m    ody(request)\u001b[K\u001b[13;4H\u001b[38;2;255;255;0m12\u001b[14;4H13\u001b[15;4H14\u001b[16;4H15\u001b[17;4H16\u001b[18;4H17\u001b[19;4H18\u001b[20;4H19\u001b[21;4H20\u001b[22;4H21\u001b[23;4H22\u001b[24;4H23\u001b[25;4H24\u001b[26;4H25\u001b[27;4H26\u001b[28;4H27\u001b[29;4H28\u001b[30;4H29\u001b[31;4H30\u001b[32;4H31\u001b[33;4H32\u001b[34;4H33\u001b[35;4H34\r\n\n\u001b(B\u001b[m:FlowNext\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.69601, "o", "\u001b[?25l\u001b[9X\u001b[38;2;255;0;0m[numscull] no active flow or no nodes\u001b(B\u001b[m\r\u001b[37;1H\u001b[37X:FlowNext\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.696326, "o", "\u001b[?25l\u001b[9X\u001b[38;2;255;0;0m[numscull] no active flow or no nodes\u001b(B\u001b[m\r\u001b[37;1H\u001b[37X:FlowNext\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.696516, "o", "\u001b[?25l\u001b[9X\u001b[38;2;255;0;0m[numscull] no active flow or no nodes\u001b(B\u001b[m\r\u001b[37;1H\u001b[37X:Fl\u001b]112\u0007\u001b[2 q\u001b[?25h"]
[148.696603, "o", "\u001b[?25lowPrev\r\u001b[37;1H\u001b[?25h"]
[148.697055, "o", "\u001b[?25l\u001b[9X\u001b[38;2;255;0;0m[numscull] no active flow or no nodes\u001b(B\u001b[m\r\u001b[37;1H\u001b[37X:FlowCreate\u001b[CBug:\u001b[CNegative\u001b[CTransfer\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.697458, "o", "\u001b[?25l\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mError executing Lua callback: ...runner/work/vimscull/vimscull/lua/numscull/transport.lua:177: run_sync: ...ru\r\nnner/work/vimscull/vimscull/lua/numscull/transport.lua:84: write failed: EPIPE\u001b[28;38r\u001b[28;1H\u001b(B\u001b[m\u001b[9M\u001b[r\u001b[27;1H\u001b(B\u001b[0;1;7m                                                                                                              \r\n\n\n\u001b(B\u001b[m\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mstack traceback:\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        [C]: in function 'error'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        ...runner/work/vimscull/vimscull/lua/numscull/transport.lua:177: in function 'run_sync'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        /home/runner/work/vimscull/vimscull/lua/numscull/client.lua:130: in function 'request'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        /home/runner/work/vimscull/vimscull/lua/numscull/flow.lua:184: in function 'flow_create'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        /home/runner/work/vimscull/vimscull/plugin/numscull.lua:163: in function 'do_create'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        /home/runner/work/vimscull/vimscull/plugin/numscull.lua:174: in function </home/runner/work/vimscull/v\r\nimscull/plugin/numscull.lua:153>\u001b(B\u001b[m\u001b[K\r\n:43                                    \u001b[K\u001b]112\u0007\u001b[2 q\r\u001b[38;1H\u001b[?25h"]
[148.698705, "o", "\u001b[?25l\u001b[11A\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 26 \u001b(B\u001b[m                                                                                                        \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 27 \u001b(B\u001b[m                                                                                                        \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 28 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mparse_body\u001b(B\u001b[m(request: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:                                                                  \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 29 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json                                                                                         \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 30 \u001b(B\u001b[m    raw = request.get(\u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"{}\"\u001b(B\u001b[m)                                                                     \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 31 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m json.loads(raw)                                                                              \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 32 \u001b(B\u001b[m                                                                                                        \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 33 \u001b(B\u001b[m                                                                                                        \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 34 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mdispatch\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, payload: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:                                                         \r\n\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m NORMAL \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m\u001b[36;10H \u001b[36;12H copilot/update-demos-in-readme \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0m example_flow.py                utf-8 \u001b[36;83H \u001b[36;85H \u001b[36;87H\u001b(B\u001b[m\u001b[38;2;255;188;3m\u001b[48;2;0;0;0m \u001b[36;89H \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0mpython \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m Top \u001b[36;103H\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m   1:1  \u001b[1;35r\u001b[H\u001b(B\u001b[m\u001b[8M\u001b[r\u001b[1;4H\u001b[38;2;255;255;0m34\u001b[2;4H33\u001b[3;4H32\u001b[4;4H3\u001b[5;4H30\u001b[6;4H29\u001b[7;4H28\u001b[8;4H27\u001b[9;4H2\u001b[10;4H25\u001b[11;4H24\u001b[12;4H23\u001b[13;5H2\u001b[15;5H0\u001b[16;4H19\u001b[17;4H18\u001b[18;4H17\u001b[19;4H1\u001b[20;4H15\u001b[21;4H14\u001b[22;4H13\u001b[23;4H12\u001b[24;4H1\u001b[25;4H10\u001b[26;4H 9\u001b[27;4H 8\r\n\u001b(B\u001b[m\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  7 \u001b(B\u001b[m    action = payload.get(\u001b[38;2;255;160;160m\"action\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"\"\u001b(B\u001b[m)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  6 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mif\u001b(B\u001b[m action == \u001b[38;2;255;160;160m\"transfer\"\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  5 \u001b(B\u001b[m        \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m process_transfer(user, payload)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  4 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m {\u001b[38;2;255;160;160m\"status\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m400\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m\"Unknown action\"\u001b(B\u001b[m}\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  3 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  2 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  1 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mprocess_transfer\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, payload: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[0;1m\u001b[38;2;255;255;0m43  \u001b(B\u001b[m\u001b[48;2;102;102;102m    amount = payload[\u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"amount\"\u001b(B\u001b[m\u001b[48;2;102;102;102m]                                                                          \u001b(B\u001b[m\r\n\n\u001b[K\n\u001b[J\u001b[35;7H    amount ="]
[148.698842, "o", " payload[\u001b[38;2;255;160;160m\"amount\"\u001b(B\u001b[m]\u001b[K\r\n\n\n\u001b(B\u001b[0;1m-- VISUAL --\u001b[35;21H\u001b(B\u001b[m\u001b[48;2;169;169;169mayloa\u001b[19D\u001b(B\u001b[m\u001b[48;2;102;102;102m    amount = payload[\u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"amount\"\u001b(B\u001b[m\u001b[48;2;102;102;102m]                                                                          \u001b(B\u001b[m\r\n\n\n\u001b[12X\u001b[A:FlowA\u001b]112\u0007\u001b[2 q\u001b[?25h\u001b[?25lddNode\r\u001b[37;1H\u001b[?25h"]
[148.740637, "o", "\u001b[?25l\u001b[12X\u001b[38;2;255;0;0m[numscull] no active flow —\u001b[37;28H create one first\u001b[1;35r\u001b[H\u001b(B\u001b[m\u001b[4M\u001b[r\u001b[1;5H\u001b[38;2;255;255;0m4\u001b[2;4H33\u001b[3;4H32\u001b[4;4H31\u001b[5;4H30\u001b[6;5H9\u001b[7;5H8\u001b[8;5H7\u001b[9;5H6\u001b[10;5H5\u001b[11;5H4\u001b[12;4H23\u001b[13;4H22\u001b[14;4H21\u001b[15;4H20\u001b[16;5H9\u001b[17;5H8\u001b[18;5H7\u001b[19;5H6\u001b[20;5H5\u001b[21;5H4\u001b[22;4H13\u001b[23;4H12\u001b[24;4H11\u001b[25;4H10\u001b[26;5H9\u001b[27;5H8\u001b[28;5H7\u001b[29;5H6\u001b[30;5H5\u001b[31;3H  4 \u001b(B\u001b[m    amount = payload[\u001b[38;2;255;160;160m\"amount\"\u001b(B\u001b[m]\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  3 \u001b(B\u001b[m    destination = payload[\u001b[38;2;255;160;160m\"destination\"\u001b(B\u001b[m]\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  2 \u001b(B\u001b[m    \u001b[38;2;128;160;255m# \u001b(B\u001b[m\u001b[38;2;0;0;255m\u001b[48;2;255;255;0mTODO\u001b(B\u001b[m\u001b[38;2;128;160;255m: add rate limiting\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  1 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m execute_transfer(user, destination, amount)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[0;1m\u001b[38;2;255;255;0m47  \u001b(B\u001b[m\u001b[48;2;102;102;102m                                                                                                        \r\n\n\n\u001b(B\u001b[0;1m-- INSERT --\u001b(B\u001b[m\r\u001b[38;1H\u001b[12X\u001b[A\u001b[44X\u001b[1;35r\u001b[H\u001b[2M\u001b[r\u001b[1;5H\u001b[38;2;255;255;0m4\u001b[2;5H3\u001b[3;5H2\u001b[4;4H31\u001b[5;4H30\u001b[6;5H9\u001b[7;5H8\u001b[8;5H7\u001b[9;5H6\u001b[10;5H5\u001b[11;5H4\u001b[12;5H3\u001b[13;5H2\u001b[14;4H21\u001b[15;4H20\u001b[16;5H9\u001b[17;5H8\u001b[18;5H7\u001b[19;5H6\u001b[20;5H5\u001b[21;5H4\u001b[22;5H3\u001b[23;5H2\u001b[24;4H11\u001b[25;4H10\u001b[26;5H9\u001b[27;5H8\u001b[28;5H7\u001b[29;5H6\u001b[30;5H5\u001b[31;5H4\u001b[32;5H3\u001b[33;3H  2 \u001b(B\u001b[mmount \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mnot\u001b(B\u001b[m validated\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  1 \u001b(B\u001b[m:\u001b[38;2;255;160;160m49\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[0;1m\u001b[38;2;255;255;0m49  \u001b(B\u001b[m\u001b[48;2;102;102;102m04lv55l                                                                                                 \r\n\n\u001b(B\u001b[m:FlowAddNode\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.74189, "o", "\u001b[?25l\u001b[12X\u001b[38;2;255;0;0m[numscull] no active flow —\u001b[37;28H create one first\u001b[1;35r\u001b[H\u001b(B\u001b[m\u001b[M\u001b[r\u001b[1;5H\u001b[38;2;255;255;0m4\u001b[2;5H3\u001b[3;5H2\u001b[4;5H1\u001b[5;4H30\u001b[6;5H9\u001b[7;5H8\u001b[8;5H7\u001b[9;5H6\u001b[10;5H5\u001b[11;5H4\u001b[12;5H3\u001b[13;5H2\u001b[14;5H1\u001b[15;4H20\u001b[16;5H9\u001b[17;5H8\u001b[18;5H7\u001b[19;5H6\u001b[20;5H5\u001b[21;5H4\u001b[22;5H3\u001b[23;5H2\u001b[24;5H1\u001b[25;4H10\u001b[26;5H9\u001b[27;5H8\u001b[28;5H7\u001b[29;5H6\u001b[30;5H5\u001b[31;5H4\u001b[32;5H3\u001b[33;5H2\u001b[34;3H  1 \u001b(B\u001b[m04lv55l\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[0;1m\u001b[38;2;255;255;0m50  \u001b(B\u001b[m\u001b[48;2;102;102;102m                                                                                                        \u001b[1;5H\u001b(B\u001b[m\u001b[38;2;255;255;0m3\u001b[2;5H2\u001b[3;5H1\u001b[4;5H0\u001b[5;4H29\u001b[6;5H8\u001b[7;5H7\u001b[8;5H6\u001b[9;5H5\u001b[10;5H4\u001b[11;5H3\u001b[12;5H2\u001b[13;5H1\u001b[14;5H0\u001b[15;4H19\u001b[16;5H8\u001b[17;5H7\u001b[18;5H6\u001b[19;5H5\u001b[20;5H4\u001b[21;5H3\u001b[22;5H2\u001b[23;5H1\u001b[24;5H0\u001b[25;4H 9\u001b[26;5H8\u001b[27;5H7\u001b[28;5H6\u001b[29;5H5\u001b[30;5H4\u001b[31;5H3\u001b[32;5H2\u001b[33;5H1\u001b[34;3H\u001b(B\u001b[0;1m\u001b[38;2;255;255;0m49  \u001b(B\u001b[m\u001b[48;2;102;102;102m04lv55l                                                                                                 \u001b[35;3H\u001b(B\u001b[m\u001b[38;2;255;255;0m  1 \u001b(B\u001b[m\u001b[K\u001b[1;35r\u001b[H\u001b[12M\u001b[r\u001b[1;4H\u001b[38;2;255;255;0m34\u001b[2;4H33\u001b[3;4H32\u001b[4;4H31\u001b[5;4H30\u001b[6;4H29\u001b[7;4H28\u001b[8;4H27\u001b[9;4H26\u001b[10;4H25\u001b[11;4H24\u001b[12;4H23\u001b[13;4H22\u001b[14;4H21\u001b[15;4H20\u001b[16;4H19\u001b[17;4H18\u001b[18;4H17\u001b[19;4H16\u001b[20;4H15\u001b[21;4H14\u001b[22;3H 13 \u001b(B\u001b[m04lv55l\u001b[K\u001b[23;4H\u001b[38;2;255;255;0m12\r\n\u001b(B\u001b[m\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 11 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255mexecute_transfer\u001b(B\u001b[m(user: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, dest: \u001b[38;2;64;255;255mstr\u001b(B\u001b[m, amount: \u001b[38;2;64;255;255mfloat\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mdict\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m 10 \u001b(B\u001b[m    \u001b[38;2;128;160;255m# Direct DB call —\u001b[25;29H no validation on amount sign!\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  9 \u001b(B\u001b[m    record = {\u001b[38;2;255;160;160m\"from\"\u001b(B\u001b[m: user, \u001b[38;2;255;160;160m\"to\"\u001b(B\u001b[m: dest, \u001b[38;2;255;160;160m\"amount\"\u001b(B\u001b[m: amount}\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  8 \u001b(B\u001b[m    save_to_ledger(record)\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  7 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m {\u001b[38;2;255;160;160m\"status\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m200\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m\"Transfer complete\"\u001b(B\u001b[m}\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  6 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  5 \u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  4 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255msave_to_ledger\u001b(B\u001b[m(record: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mNone\u001b(B\u001b[m:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  3 \u001b(B\u001b[m    \u001b[38;2;255;160;160m\"\"\"Append transaction to the ledger file.\"\"\"\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  2 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  1 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mwith\u001b(B\u001b[m \u001b[38;2;64;255;255mopen\u001b(B\u001b[m(\u001b[38;2;255;160;160m\"/var/data/ledger.jsonl\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"a\"\u001b(B\u001b[m) \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mas\u001b(B\u001b[m f:\u001b[K\r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[0;1m\u001b[38;2;255;255;0m62  \u001b(B\u001b[m\u001b[48;2;102;102;102m        f.write(json.dumps(record) + \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"\u001b(B\u001b[m\u001b[38;2;255;165;0m\u001b[48;2;102;102;102m\\n\u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"\u001b(B\u001b[m\u001b[48;2;102;102;102m)                                                              \u001b(B\u001b[m\r\n\n\u001b[44X:\u001b]112\u0007\u001b[2 q\u001b[?25h"]
[148.74205, "o", "\u001b[?25l\u001b[Cno\u001b[Csign\u001b[Ccheck\u001b[Con\u001b[Camount\r\u001b[37;1H\u001b[?25h"]
[148.742797, "o", "\u001b[?25l\u001b[25X:FlowSelect\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.743273, "o", "\u001b[?25l\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mError executing Lua callback: ...runner/work/vimscull/vimscull/lua/numscull/transport.lua:177: run_sync: ...ru\r\nnner/work/vimscull/vimscull/lua/numscull/transport.lua:84: write failed: EPIPE\u001b(B\u001b[m\r\u001b[A\u001b[K\n\u001b[J\u001b[A:.FlowSelect\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.743575, "o", "\u001b[?25l\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mE481: No range allowed\u001b(B\u001b[m\r\u001b[37;1H\u001b[22X:FlowLis\u001b]112\u0007\u001b[2 q\u001b[?25h\u001b[?25lt\r\u001b[37;1H\u001b[?25h"]
[148.743892, "o", "\u001b[?25l\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mError executing Lua callback: ...runner/work/vimscull/vimscull/lua/numscull/transport.lua:177: run_sync: ...ru\r\nnner/work/vimscull/vimscull/lua/numscull/transport.lua:84: write failed: EPIPE\u001b[29;38r\u001b[29;1H\u001b(B\u001b[m\u001b[8M\u001b[r\u001b[28;1H\u001b(B\u001b[0;1;7m                                                                                                              \r\n\n\n\u001b(B\u001b[m\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mstack traceback:\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        [C]: in function 'error'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        ...runner/work/vimscull/vimscull/lua/numscull/transport.lua:177: in function 'run_sync'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        /home/runner/work/vimscull/vimscull/lua/numscull/client.lua:130: in function 'get_all'\u001b(B\u001b[m\u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        /home/runner/work/vimscull/vimscull/lua/numscull/flow.lua:697: in function 'flow_list'\u001b(B\u001b[m  \u001b[K\r\n\u001b[38;2;255;255;255m\u001b[48;2;255;0;0m        /home/runner/work/vimscull/vimscull/plugin/numscull.lua:209: in function </home/runner/work/vimscull/v\r\nimscull/plugin/numscull.lua:208>\u001b(B\u001b[m\u001b[K\r\n:q                                     \u001b[K\u001b]112\u0007\u001b[2 q\r\u001b[38;1H\u001b[?25h"]
[148.744286, "o", "\u001b[?25l\u001b[38;2;255;255;255m\u001b[48;2;255;0;0mE37: No write since last change\r\u001b[10A\u001b(B\u001b[m\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  7 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mreturn\u001b(B\u001b[m {\u001b[38;2;255;160;160m\"status\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m200\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"body\"\u001b(B\u001b[m: \u001b[38;2;255;160;160m\"Transfer complete\"\u001b(B\u001b[m}                                                 \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  6 \u001b(B\u001b[m                                                                                                        \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  5 \u001b(B\u001b[m                                                                                                        \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  4 \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mdef\u001b(B\u001b[m \u001b[38;2;64;255;255msave_to_ledger\u001b(B\u001b[m(record: \u001b[38;2;64;255;255mdict\u001b(B\u001b[m) -> \u001b[38;2;64;255;255mNone\u001b(B\u001b[m:                                                               \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  3 \u001b(B\u001b[m    \u001b[38;2;255;160;160m\"\"\"Append transaction to the ledger file.\"\"\"\u001b(B\u001b[m                                                        \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  2 \u001b(B\u001b[m    \u001b[38;2;255;128;255mimport\u001b(B\u001b[m json                                                                                         \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[m\u001b[38;2;255;255;0m  1 \u001b(B\u001b[m    \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mwith\u001b(B\u001b[m \u001b[38;2;64;255;255mopen\u001b(B\u001b[m(\u001b[38;2;255;160;160m\"/var/data/ledger.jsonl\"\u001b(B\u001b[m, \u001b[38;2;255;160;160m\"a\"\u001b(B\u001b[m) \u001b(B\u001b[0;1m\u001b[38;2;255;255;96mas\u001b(B\u001b[m f:                                                      \r\n\u001b[38;2;0;255;255m\u001b[48;2;128;128;128m  \u001b(B\u001b[0;1m\u001b[38;2;255;255;0m62  \u001b(B\u001b[m\u001b[48;2;102;102;102m        f.write(json.dumps(record) + \u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"\u001b(B\u001b[m\u001b[38;2;255;165;0m\u001b[48;2;102;102;102m\\n\u001b(B\u001b[m\u001b[38;2;255;160;160m\u001b[48;2;102;102;102m\"\u001b(B\u001b[m\u001b[48;2;102;102;102m)                                                              \r\n\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m NORMAL \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m\u001b[36;10H \u001b[36;12H copilot/update-demos-in-readme \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0m example_flow.py                utf-8 \u001b[36;83H \u001b[36;85H \u001b[36;87H\u001b(B\u001b[m\u001b[38;2;255;188;3m\u001b[48;2;0;0;0m \u001b[36;89H \u001b(B\u001b[m\u001b[38;2;80;80;80m\u001b[48;2;0;0;0mpython \u001b(B\u001b[m\u001b[38;2;169;169;169m\u001b[48;2;0;0;0m Top \u001b[36;103H\u001b(B\u001b[0;1m\u001b[38;2;0;0;0m\u001b[48;2;169;169;169m   1:1  \u001b(B\u001b[m\r\n\u001b[K\n\u001b[J\u001b[A:NumscullDisconnect\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.744432, "o", "\u001b[?25l\u001b[19X[numscull] disconnected\r\u001b[37;1H\u001b[23X:q!\u001b]112\u0007\u001b[2 q\r\u001b[37;1H\u001b[?25h"]
[148.745909, "o", "\u001b[?25l\u001b]112\u0007\u001b[2 q\u001b[?25h"]
[148.749084, "o", "\u001b[?25l\n\u001b]112\u0007\u001b[2 q\u001b[?1002l\u001b[?1006l\u001b(B\u001b[m\u001b[?25h\u001b[?1l\u001b>\u001b[?1049l\u001b[23;0;0t\u001b[?2004l\u001b[?1004l\u001b[?25h"]
